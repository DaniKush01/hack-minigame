<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hacking PIN – Log Analysis</title>
<style>
  body{
    margin:0; background:#020617; color:#22c55e; font-family:monospace;
    display:flex; align-items:center; justify-content:center; min-height:100vh;
  }
  .phone{
    width:380px; max-width:95vw; border:2px solid #22c55e; border-radius:20px;
    padding:14px; background:#020617; box-shadow:0 0 25px rgba(34,197,94,.25);
  }
  h1{ font-size:1.1rem; text-align:center; margin:6px 0 10px; }
  .log{ border:1px solid #14532d; padding:8px; font-size:.85rem; margin-bottom:8px; }
  .keypad{ display:grid; grid-template-columns:repeat(3,1fr); gap:6px; margin:10px 0; }
  .key{ border:1px solid #14532d; padding:10px 0; text-align:center; cursor:pointer; }
  .display{ border:1px solid #14532d; padding:6px; text-align:center; letter-spacing:4px; }
  .btn{ border:1px solid #14532d; background:#020617; color:#22c55e; padding:6px 10px; cursor:pointer; margin:4px 2px; }
  .hidden{ display:none; }
  .chat{ border:1px solid #14532d; padding:6px; margin:6px 0; cursor:pointer; }
  .msg{ border-top:1px solid #14532d; margin-top:8px; padding-top:8px; }
</style>
</head>
<body>

<div class="phone">
  <h1 id="title">Log intercettati – Tastierino banca</h1>

  <!-- Step 1 -->
  <div id="puzzle">
    <div class="log">
    Tentativo 1:  7 4 1 8  → 1 cifra corretta, posizione corretta <br> 
    Tentativo 2:  9 3 4 6  → 2 cifre corrette, 1 in posizione corretta  <br>
    Tentativo 3:  3 9 2 7  → 4 cifre corrette, posizione sbagliata  <br>
    Tentativo 4:  0 9 2 1  → 2 cifre corrette, 1 in posizione corretta  <br>
    </div>

    <div class="display" id="display">____</div>

    <div class="keypad">
      <div class="key" onclick="press(1)">1</div>
      <div class="key" onclick="press(2)">2</div>
      <div class="key" onclick="press(3)">3</div>
      <div class="key" onclick="press(4)">4</div>
      <div class="key" onclick="press(5)">5</div>
      <div class="key" onclick="press(6)">6</div>
      <div class="key" onclick="press(7)">7</div>
      <div class="key" onclick="press(8)">8</div>
      <div class="key" onclick="press(9)">9</div>
      <div></div>
      <div class="key" onclick="press(0)">0</div>
      <div></div>
    </div>

    <button class="btn" onclick="clearPin()">Cancella</button>
    <button class="btn" onclick="checkPin()">Invia</button>

    <div class="log" id="feedback"></div>
  </div>

  <!-- Step 2 -->
  <div id="messages" class="hidden">
    <h1>Messaggi</h1>
    <div class="chat" onclick="openChat(1)">Collega</div>
    <div class="chat" onclick="openChat(2)">Gruppo lavoro</div>
    <div class="chat" onclick="openChat(3)">Tecnico IT</div>
    <div class="chat" onclick="openChat(4)">Banca</div>
    <div class="chat" onclick="openChat(5)">Amico</div>
    <div id="chatView" class="msg hidden"></div>
  </div>
</div>

<script>
  const PIN = "7392"; // soluzione coerente con i log
  let input = "";

  function press(n){
    if(input.length >= 4) return;
    input += n;
    document.getElementById("display").innerText = input.padEnd(4, "_");
  }

  function clearPin(){
    input = "";
    document.getElementById("display").innerText = "____";
    document.getElementById("feedback").innerText = "";
  }

  function checkPin(){
    if(input.length < 4) return;
    if(input === PIN){
      document.getElementById("feedback").innerText = "> PIN corretto. Dispositivo sbloccato.";
      setTimeout(()=>{
        document.getElementById("puzzle").classList.add("hidden");
        document.getElementById("messages").classList.remove("hidden");
        document.getElementById("title").innerText = "Telefono compromesso";
      },800);
    } else {
      document.getElementById("feedback").innerText = "> PIN errato. Riprova.";
      input = "";
      document.getElementById("display").innerText = "____";
    }
  }

  function openChat(id){
    const v = document.getElementById("chatView");
    v.classList.remove("hidden");
    if(id === 4){
      v.innerHTML = "<strong>Banca</strong><br><br>Codice tastierino di oggi:<br><span style='font-size:1.2rem'>7392</span>";
    } else {
      v.innerHTML = "Conversazione non rilevante.";
    }
  }
</script>

</body>
</html>
